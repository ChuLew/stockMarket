{"ast":null,"code":"import _classCallCheck from\"/Users/mitchlew/Documents/workspace-spring-tool-suite-4-4.6.1.RELEASE/Stock/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mitchlew/Documents/workspace-spring-tool-suite-4-4.6.1.RELEASE/Stock/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mitchlew/Documents/workspace-spring-tool-suite-4-4.6.1.RELEASE/Stock/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mitchlew/Documents/workspace-spring-tool-suite-4-4.6.1.RELEASE/Stock/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{signIn,signOut,createPerson,currentPerson}from\"../actions\";var GoogleAuth=/*#__PURE__*/function(_React$Component){_inherits(GoogleAuth,_React$Component);var _super=_createSuper(GoogleAuth);function GoogleAuth(){var _this;_classCallCheck(this,GoogleAuth);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onAuthChange=function(isSignedIn){if(isSignedIn){_this.props.signIn(_this.auth.currentUser.get().getId());}else{_this.props.signOut();}};_this.onSignInClick=function(){_this.auth.signIn();var id=_this.auth.currentUser.get().getId();_this.props.createPerson({idperson:id});_this.props.currentPerson(id);};_this.onSignOutClick=function(){_this.auth.signOut();};return _this;}_createClass(GoogleAuth,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.gapi.load(\"client:auth2\",function(){window.gapi.client.init({clientId:\"895329232490-cj7fe970fah76sntch6gn2i7n1st0ljd.apps.googleusercontent.com\",scope:\"email\"}).then(function(){_this2.auth=window.gapi.auth2.getAuthInstance();_this2.onAuthChange(_this2.auth.isSignedIn.get());_this2.auth.isSignedIn.listen(_this2.onAuthChange);});});}},{key:\"renderAuthButton\",value:function renderAuthButton(){if(this.props.isSignedIn===null){return null;}else if(this.props.isSignedIn){return/*#__PURE__*/React.createElement(\"button\",{onClick:this.onSignOutClick,className:\"ui red google button\"},/*#__PURE__*/React.createElement(\"i\",{className:\"google icon\"}),\"Sign Out\");}else{return/*#__PURE__*/React.createElement(\"button\",{onClick:this.onSignInClick,className:\"ui red google button\"},/*#__PURE__*/React.createElement(\"i\",{className:\"google icon\"}),\"Sign In with Google\");}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,this.renderAuthButton());}}]);return GoogleAuth;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{isSignedIn:state.auth.isSignedIn};};export default connect(mapStateToProps,{signIn:signIn,signOut:signOut,createPerson:createPerson,currentPerson:currentPerson})(GoogleAuth);","map":{"version":3,"sources":["/Users/mitchlew/Documents/workspace-spring-tool-suite-4-4.6.1.RELEASE/Stock/client/src/components/GoogleAuth.js"],"names":["React","connect","signIn","signOut","createPerson","currentPerson","GoogleAuth","onAuthChange","isSignedIn","props","auth","currentUser","get","getId","onSignInClick","id","idperson","onSignOutClick","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","renderAuthButton","Component","mapStateToProps","state"],"mappings":"ooBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,MAAT,CAAiBC,OAAjB,CAA0BC,YAA1B,CAAuCC,aAAvC,KAA4D,YAA5D,C,GAEMC,CAAAA,U,uVAiBJC,Y,CAAe,SAACC,UAAD,CAAgB,CAC7B,GAAIA,UAAJ,CAAgB,CACd,MAAKC,KAAL,CAAWP,MAAX,CAAkB,MAAKQ,IAAL,CAAUC,WAAV,CAAsBC,GAAtB,GAA4BC,KAA5B,EAAlB,EACD,CAFD,IAEO,CACL,MAAKJ,KAAL,CAAWN,OAAX,GACD,CACF,C,OAEDW,a,CAAgB,UAAM,CACpB,MAAKJ,IAAL,CAAUR,MAAV,GACA,GAAMa,CAAAA,EAAE,CAAG,MAAKL,IAAL,CAAUC,WAAV,CAAsBC,GAAtB,GAA4BC,KAA5B,EAAX,CACA,MAAKJ,KAAL,CAAWL,YAAX,CAAwB,CAAEY,QAAQ,CAAED,EAAZ,CAAxB,EACA,MAAKN,KAAL,CAAWJ,aAAX,CAAyBU,EAAzB,EACD,C,OAEDE,c,CAAiB,UAAM,CACrB,MAAKP,IAAL,CAAUP,OAAV,GACD,C,mGAjCmB,iBAClBe,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiB,cAAjB,CAAiC,UAAM,CACrCF,MAAM,CAACC,IAAP,CAAYE,MAAZ,CACGC,IADH,CACQ,CACJC,QAAQ,CACN,0EAFE,CAGJC,KAAK,CAAE,OAHH,CADR,EAMGC,IANH,CAMQ,UAAM,CACV,MAAI,CAACf,IAAL,CAAYQ,MAAM,CAACC,IAAP,CAAYO,KAAZ,CAAkBC,eAAlB,EAAZ,CACA,MAAI,CAACpB,YAAL,CAAkB,MAAI,CAACG,IAAL,CAAUF,UAAV,CAAqBI,GAArB,EAAlB,EACA,MAAI,CAACF,IAAL,CAAUF,UAAV,CAAqBoB,MAArB,CAA4B,MAAI,CAACrB,YAAjC,EACD,CAVH,EAWD,CAZD,EAaD,C,2DAqBkB,CACjB,GAAI,KAAKE,KAAL,CAAWD,UAAX,GAA0B,IAA9B,CAAoC,CAClC,MAAO,KAAP,CACD,CAFD,IAEO,IAAI,KAAKC,KAAL,CAAWD,UAAf,CAA2B,CAChC,mBACE,8BAAQ,OAAO,CAAE,KAAKS,cAAtB,CAAsC,SAAS,CAAC,sBAAhD,eACE,yBAAG,SAAS,CAAC,aAAb,EADF,YADF,CAMD,CAPM,IAOA,CACL,mBACE,8BAAQ,OAAO,CAAE,KAAKH,aAAtB,CAAqC,SAAS,CAAC,sBAA/C,eACE,yBAAG,SAAS,CAAC,aAAb,EADF,uBADF,CAMD,CACF,C,uCAEQ,CACP,mBAAO,+BAAM,KAAKe,gBAAL,EAAN,CAAP,CACD,C,wBA1DsB7B,KAAK,CAAC8B,S,EA4D/B,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CACjC,MAAO,CACLxB,UAAU,CAAEwB,KAAK,CAACtB,IAAN,CAAWF,UADlB,CAAP,CAGD,CAJD,CAMA,cAAeP,CAAAA,OAAO,CAAC8B,eAAD,CAAkB,CAAE7B,MAAM,CAANA,MAAF,CAAUC,OAAO,CAAPA,OAAV,CAAmBC,YAAY,CAAZA,YAAnB,CAAgCC,aAAa,CAAbA,aAAhC,CAAlB,CAAP,CACbC,UADa,CAAf","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { signIn, signOut, createPerson,currentPerson } from \"../actions\";\n\nclass GoogleAuth extends React.Component {\n  componentDidMount() {\n    window.gapi.load(\"client:auth2\", () => {\n      window.gapi.client\n        .init({\n          clientId:\n            \"895329232490-cj7fe970fah76sntch6gn2i7n1st0ljd.apps.googleusercontent.com\",\n          scope: \"email\",\n        })\n        .then(() => {\n          this.auth = window.gapi.auth2.getAuthInstance();\n          this.onAuthChange(this.auth.isSignedIn.get());\n          this.auth.isSignedIn.listen(this.onAuthChange);\n        });\n    });\n  }\n\n  onAuthChange = (isSignedIn) => {\n    if (isSignedIn) {\n      this.props.signIn(this.auth.currentUser.get().getId());\n    } else {\n      this.props.signOut();\n    }\n  };\n\n  onSignInClick = () => {\n    this.auth.signIn();\n    const id = this.auth.currentUser.get().getId();\n    this.props.createPerson({ idperson: id });\n    this.props.currentPerson(id);\n  };\n\n  onSignOutClick = () => {\n    this.auth.signOut();\n  };\n\n  renderAuthButton() {\n    if (this.props.isSignedIn === null) {\n      return null;\n    } else if (this.props.isSignedIn) {\n      return (\n        <button onClick={this.onSignOutClick} className=\"ui red google button\">\n          <i className=\"google icon\" />\n          Sign Out\n        </button>\n      );\n    } else {\n      return (\n        <button onClick={this.onSignInClick} className=\"ui red google button\">\n          <i className=\"google icon\" />\n          Sign In with Google\n        </button>\n      );\n    }\n  }\n\n  render() {\n    return <div>{this.renderAuthButton()}</div>;\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    isSignedIn: state.auth.isSignedIn,\n  };\n};\n\nexport default connect(mapStateToProps, { signIn, signOut, createPerson,currentPerson })(\n  GoogleAuth\n);\n"]},"metadata":{},"sourceType":"module"}